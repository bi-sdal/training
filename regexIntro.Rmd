Resources:
More detailed phone number example: https://stackoverflow.com/questions/16699007/regular-expression-to-match-standard-10-digit-phone-number
Excellent cheat sheet: https://www.rstudio.com/wp-content/uploads/2016/09/RegExCheatsheet.pdf
More than you ever wanted: https://www.regular-expressions.info/tutorial.html

A great package for regex in r is Hadley Wickham's 'stringr' package. We'll be using this often.
```{r}
library(stringr)
```

The main idea behind regular expressions (or regex) is to find blocks of text that match a certain pattern. This pattern can be as simple as a single letter or number, or as complicated as an entire address. Some simple examples.

```{r}
allchars = '1234567890abcdefghijklmnopqrstuvwxyz'
str_extract_all(allchars, '1')
str_extract_all(allchars, '12')
str_extract_all(allchars, '13')
str_extract_all(allchars, 'a')
```
A character class is a set of characters, any one of which will match.
```{r}
str_extract_all(allchars, '[12345]')
str_extract_all(allchars, '[abcde]')
str_extract_all(allchars, '[[:digit:]]')
```

What if you wanted all numbers? There are a number of built in classes to save on typing:
'\\d' is all digits
'[[:lower:]]' is all lower case letters
'\\s' is all white space
'.' is anything at all and is known as the wildcard

```{r}
str_extract_all(allchars, '[[:digit:]]')
str_extract_all(allchars, '[[:lower:]]')
str_extract_all(allchars, '\\s')
```
We'll use a motivating example to introduce some other thing you can do with regular expressions. Let's say you wanted to extract all the phone numbers in a body of text.
```{r}
exampleText = "Some phone numbers are 7608675309, perhaps also 403-596-4038. Some people use periods in their numbers, so 402.367.5039. We can also have things like 304 385 1029 or (760)-581-3957. How can we extract all of these?"
```

We'll start simple and try to build expressions that are general enough to get all the numbers in the above paragraph. The first number is the easiest, how can we match on any 10 numbers?
```{r}
str_extract_all(exampleText, '\\d\\d\\d\\d\\d\\d\\d\\d\\d\\d')
```
More succinctly we can use a quantifier to match a given number of times: {n} will match what it preceedes it n times.
```{r}
str_extract_all(exampleText, '\\d{10}')
```
Other useful quantifiers are * to match at least 0 times, + to match at least once, and {n,m} to match between n and m times. We can use + to get the first two numbers. 
```{r}
str_extract_all(exampleText, '\\d{3}-*\\d{3}-*\\d{4}')
```
Sometimes the number groups are separated by -, sometimes by '.'. What happens if we try to get the number separated by periods?
```{r}
str_extract_all(exampleText, '\\d{3}.*\\d{3}.*\\d{4}')
```
What happened? Since the period is the wildcard it matched all kinds of things. If we want to treat the period literally, instead of as a special character, we need to escape it with double backslashes:

```{r}
str_extract_all(exampleText, '\\d{3}\\.*\\d{3}\\.*\\d{4}')
```
Now it's treating period as a literal character. We can combine the expression matching period to the one matching - using character classes:
```{r}
str_extract_all(exampleText, '\\d{3}[-\\.]*\\d{3}[-\\.]*\\d{4}')
```
The pattern '[-\\.]*' will match either - or period at least 0 times. If you epect phone numbers with some other delimiter, you can toss it in that character class just the same. We can use the same idea to capture the space separated one.
```{r}
str_extract_all(exampleText, '\\d{3}[-\\.\\s]*\\d{3}[-\\.\\s]*\\d{4}')
```
The last challenge is getting the number with the parentheses. We can use the same idea. Note that since parenthese are a special character we need to escape them.
```{r}
str_extract_all(exampleText, '\\(*\\d{3}\\)*[-\\.\\s]*\\d{3}[-\\.\\s]*\\d{4}')
```





## Regex in the wild!
Perhaps you've looked at some of Dan's old gitignore files?
```{r}
readLines('./data/regexClips/exampleGitignore')
```

Regex is great for getting a list of files from a directory. For instance, if you want to write a loop to read in all .csv files.
```{r}
list.files(pattern = ".Rmd")
```
