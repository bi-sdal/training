<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Training Manual for SDAL</title>
  <meta name="description" content="This is a training manual for The Social and Decision Analytics Laboratory.">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Training Manual for SDAL" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a training manual for The Social and Decision Analytics Laboratory." />
  <meta name="github-repo" content="bi-sdal/training" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Training Manual for SDAL" />
  
  <meta name="twitter:description" content="This is a training manual for The Social and Decision Analytics Laboratory." />
  




  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="random-forests.html">
<link rel="next" href="bootstrapping.html">
<script src="book_assets/jquery-2.2.3/jquery.min.js"></script>
<link href="book_assets/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="book_assets/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="book_assets/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="book_assets/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="book_assets/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-119721925-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-119721925-1');
</script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Training Manual for SDAL</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a><ul>
<li class="chapter" data-level="" data-path="the-social-and-decision-analytics-laboratory.html"><a href="the-social-and-decision-analytics-laboratory.html"><i class="fa fa-check"></i>The Social and Decision Analytics Laboratory</a><ul>
<li class="chapter" data-level="" data-path="the-social-and-decision-analytics-laboratory.html"><a href="the-social-and-decision-analytics-laboratory.html#overview-our-mission-methods"><i class="fa fa-check"></i>Overview: Our Mission &amp; Methods</a></li>
<li class="chapter" data-level="" data-path="the-social-and-decision-analytics-laboratory.html"><a href="the-social-and-decision-analytics-laboratory.html#innovation-our-research-focus-areas"><i class="fa fa-check"></i>Innovation: Our Research Focus Areas</a></li>
<li class="chapter" data-level="" data-path="the-social-and-decision-analytics-laboratory.html"><a href="the-social-and-decision-analytics-laboratory.html#collaboration-our-research-partnerships"><i class="fa fa-check"></i>Collaboration: Our Research Partnerships</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data-science-for-the-public-good-program.html"><a href="data-science-for-the-public-good-program.html"><i class="fa fa-check"></i>Data Science for the Public Good Program</a><ul>
<li class="chapter" data-level="" data-path="data-science-for-the-public-good-program.html"><a href="data-science-for-the-public-good-program.html#problem"><i class="fa fa-check"></i>Problem</a></li>
<li class="chapter" data-level="" data-path="data-science-for-the-public-good-program.html"><a href="data-science-for-the-public-good-program.html#methods"><i class="fa fa-check"></i>Methods</a></li>
<li class="chapter" data-level="" data-path="data-science-for-the-public-good-program.html"><a href="data-science-for-the-public-good-program.html#impact"><i class="fa fa-check"></i>Impact</a></li>
<li class="chapter" data-level="" data-path="data-science-for-the-public-good-program.html"><a href="data-science-for-the-public-good-program.html#program-sponsors-who-we-work-with"><i class="fa fa-check"></i>Program Sponsors: Who We Work With</a></li>
<li class="chapter" data-level="" data-path="data-science-for-the-public-good-program.html"><a href="data-science-for-the-public-good-program.html#previous-projects"><i class="fa fa-check"></i>Previous Projects</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="lesson-materials.html"><a href="lesson-materials.html"><i class="fa fa-check"></i>Lesson Materials</a><ul>
<li class="chapter" data-level="" data-path="lesson-materials.html"><a href="lesson-materials.html#software-carpenty"><i class="fa fa-check"></i>Software-Carpenty</a></li>
<li class="chapter" data-level="" data-path="lesson-materials.html"><a href="lesson-materials.html#data-carpentry"><i class="fa fa-check"></i>Data-Carpentry</a></li>
<li class="chapter" data-level="" data-path="lesson-materials.html"><a href="lesson-materials.html#the-carpentries"><i class="fa fa-check"></i>The Carpentries</a></li>
<li class="chapter" data-level="" data-path="lesson-materials.html"><a href="lesson-materials.html#datacamp"><i class="fa fa-check"></i>DataCamp</a></li>
<li class="chapter" data-level="" data-path="lesson-materials.html"><a href="lesson-materials.html#r-for-data-science"><i class="fa fa-check"></i>R for Data Science</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="setup.html"><a href="setup.html"><i class="fa fa-check"></i>Setup</a><ul>
<li class="chapter" data-level="" data-path="the-bash-shell.html"><a href="the-bash-shell.html"><i class="fa fa-check"></i>The Bash Shell</a><ul>
<li class="chapter" data-level="" data-path="the-bash-shell.html"><a href="the-bash-shell.html#windows"><i class="fa fa-check"></i>Windows</a></li>
<li class="chapter" data-level="" data-path="the-bash-shell.html"><a href="the-bash-shell.html#macos"><i class="fa fa-check"></i>macOS</a></li>
<li class="chapter" data-level="" data-path="the-bash-shell.html"><a href="the-bash-shell.html#linux"><i class="fa fa-check"></i>Linux</a></li>
<li class="chapter" data-level="" data-path="the-bash-shell.html"><a href="the-bash-shell.html#chromebook"><i class="fa fa-check"></i>Chromebook</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="git.html"><a href="git.html"><i class="fa fa-check"></i>Git</a><ul>
<li class="chapter" data-level="" data-path="git.html"><a href="git.html#windows-1"><i class="fa fa-check"></i>Windows</a></li>
<li class="chapter" data-level="" data-path="git.html"><a href="git.html#macos-1"><i class="fa fa-check"></i>macOS</a></li>
<li class="chapter" data-level="" data-path="git.html"><a href="git.html#linux-1"><i class="fa fa-check"></i>Linux</a></li>
<li class="chapter" data-level="" data-path="git.html"><a href="git.html#chromebook-1"><i class="fa fa-check"></i>Chromebook</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="text-editor.html"><a href="text-editor.html"><i class="fa fa-check"></i>Text Editor</a><ul>
<li class="chapter" data-level="" data-path="text-editor.html"><a href="text-editor.html#windows-2"><i class="fa fa-check"></i>Windows</a></li>
<li class="chapter" data-level="" data-path="text-editor.html"><a href="text-editor.html#macos-2"><i class="fa fa-check"></i>macOS</a></li>
<li class="chapter" data-level="" data-path="text-editor.html"><a href="text-editor.html#linux-2"><i class="fa fa-check"></i>Linux</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="r.html"><a href="r.html"><i class="fa fa-check"></i>R</a><ul>
<li class="chapter" data-level="" data-path="r.html"><a href="r.html#windows-3"><i class="fa fa-check"></i>Windows</a></li>
<li class="chapter" data-level="" data-path="r.html"><a href="r.html#macos-3"><i class="fa fa-check"></i>macOS</a></li>
<li class="chapter" data-level="" data-path="r.html"><a href="r.html#linux-3"><i class="fa fa-check"></i>Linux</a></li>
<li class="chapter" data-level="" data-path="r.html"><a href="r.html#post-installation-settings"><i class="fa fa-check"></i>Post installation settings</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="sqlite.html"><a href="sqlite.html"><i class="fa fa-check"></i>SQLite</a><ul>
<li class="chapter" data-level="" data-path="sqlite.html"><a href="sqlite.html#windows-4"><i class="fa fa-check"></i>Windows</a></li>
<li class="chapter" data-level="" data-path="sqlite.html"><a href="sqlite.html#macos-4"><i class="fa fa-check"></i>macOS</a></li>
<li class="chapter" data-level="" data-path="sqlite.html"><a href="sqlite.html#linux-4"><i class="fa fa-check"></i>Linux</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="ssh-keys.html"><a href="ssh-keys.html"><i class="fa fa-check"></i>SSH Keys</a><ul>
<li class="chapter" data-level="" data-path="ssh-keys.html"><a href="ssh-keys.html#github"><i class="fa fa-check"></i>GitHub</a></li>
<li class="chapter" data-level="" data-path="ssh-keys.html"><a href="ssh-keys.html#lightfoot"><i class="fa fa-check"></i>Lightfoot</a></li>
<li class="chapter" data-level="" data-path="ssh-keys.html"><a href="ssh-keys.html#gitlab-devlab"><i class="fa fa-check"></i>GitLab (devlab)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="latex.html"><a href="latex.html"><i class="fa fa-check"></i>LaTeX</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="syllabus.html"><a href="syllabus.html"><i class="fa fa-check"></i>Syllabus</a><ul>
<li class="chapter" data-level="" data-path="lesson-breakdown.html"><a href="lesson-breakdown.html"><i class="fa fa-check"></i>Lesson Breakdown</a><ul>
<li class="chapter" data-level="" data-path="lesson-breakdown.html"><a href="lesson-breakdown.html#lesson-1"><i class="fa fa-check"></i>Lesson 1</a></li>
<li class="chapter" data-level="" data-path="lesson-breakdown.html"><a href="lesson-breakdown.html#lesson-2"><i class="fa fa-check"></i>Lesson 2</a></li>
<li class="chapter" data-level="" data-path="lesson-breakdown.html"><a href="lesson-breakdown.html#lesson-3"><i class="fa fa-check"></i>Lesson 3</a></li>
<li class="chapter" data-level="" data-path="lesson-breakdown.html"><a href="lesson-breakdown.html#lesson-4"><i class="fa fa-check"></i>Lesson 4</a></li>
<li class="chapter" data-level="" data-path="lesson-breakdown.html"><a href="lesson-breakdown.html#lesson-5"><i class="fa fa-check"></i>Lesson 5</a></li>
<li class="chapter" data-level="" data-path="lesson-breakdown.html"><a href="lesson-breakdown.html#lesson-6"><i class="fa fa-check"></i>Lesson 6</a></li>
<li class="chapter" data-level="" data-path="lesson-breakdown.html"><a href="lesson-breakdown.html#lesson-7"><i class="fa fa-check"></i>Lesson 7</a></li>
<li class="chapter" data-level="" data-path="lesson-breakdown.html"><a href="lesson-breakdown.html#lesson-8"><i class="fa fa-check"></i>Lesson 8</a></li>
<li class="chapter" data-level="" data-path="lesson-breakdown.html"><a href="lesson-breakdown.html#lesson-9"><i class="fa fa-check"></i>Lesson 9</a></li>
<li class="chapter" data-level="" data-path="lesson-breakdown.html"><a href="lesson-breakdown.html#lesson-10"><i class="fa fa-check"></i>Lesson 10</a></li>
<li class="chapter" data-level="" data-path="lesson-breakdown.html"><a href="lesson-breakdown.html#lesson-11"><i class="fa fa-check"></i>Lesson 11</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>I Presentations and Talks</b></span></li>
<li class="chapter" data-level="" data-path="dspg-introduction.html"><a href="dspg-introduction.html"><i class="fa fa-check"></i>DSPG Introduction</a></li>
<li class="chapter" data-level="" data-path="ethics.html"><a href="ethics.html"><i class="fa fa-check"></i>Ethics</a></li>
<li class="part"><span><b>II SDAL Specific Components</b></span></li>
<li class="chapter" data-level="1" data-path="infrastructure.html"><a href="infrastructure.html"><i class="fa fa-check"></i><b>1</b> Infrastructure</a><ul>
<li class="chapter" data-level="1.1" data-path="components.html"><a href="components.html"><i class="fa fa-check"></i><b>1.1</b> Components</a></li>
<li class="chapter" data-level="1.2" data-path="accessing-servers.html"><a href="accessing-servers.html"><i class="fa fa-check"></i><b>1.2</b> Accessing Servers</a><ul>
<li class="chapter" data-level="1.2.1" data-path="accessing-servers.html"><a href="accessing-servers.html#rstudio"><i class="fa fa-check"></i><b>1.2.1</b> RStudio</a></li>
<li class="chapter" data-level="1.2.2" data-path="accessing-servers.html"><a href="accessing-servers.html#database"><i class="fa fa-check"></i><b>1.2.2</b> Database</a></li>
<li class="chapter" data-level="1.2.3" data-path="accessing-servers.html"><a href="accessing-servers.html#python"><i class="fa fa-check"></i><b>1.2.3</b> Python</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="project-template.html"><a href="project-template.html"><i class="fa fa-check"></i><b>1.3</b> Project Template</a></li>
<li class="chapter" data-level="1.4" data-path="getting-a-project-repository.html"><a href="getting-a-project-repository.html"><i class="fa fa-check"></i><b>1.4</b> Getting a project repository</a><ul>
<li class="chapter" data-level="1.4.1" data-path="getting-a-project-repository.html"><a href="getting-a-project-repository.html#using-terminal"><i class="fa fa-check"></i><b>1.4.1</b> Using Terminal</a></li>
<li class="chapter" data-level="1.4.2" data-path="getting-a-project-repository.html"><a href="getting-a-project-repository.html#using-rstudio"><i class="fa fa-check"></i><b>1.4.2</b> Using RStudio</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Version Control</b></span></li>
<li class="chapter" data-level="2" data-path="version-control.html"><a href="version-control.html"><i class="fa fa-check"></i><b>2</b> Version Control</a><ul>
<li class="chapter" data-level="2.1" data-path="git-1.html"><a href="git-1.html"><i class="fa fa-check"></i><b>2.1</b> Git</a></li>
<li class="chapter" data-level="2.2" data-path="git-setup.html"><a href="git-setup.html"><i class="fa fa-check"></i><b>2.2</b> Git setup</a></li>
<li class="chapter" data-level="2.3" data-path="git-on-your-own.html"><a href="git-on-your-own.html"><i class="fa fa-check"></i><b>2.3</b> Git on your own</a></li>
<li class="chapter" data-level="2.4" data-path="working-with-remotes.html"><a href="working-with-remotes.html"><i class="fa fa-check"></i><b>2.4</b> Working with remotes</a></li>
<li class="chapter" data-level="2.5" data-path="git-with-branches.html"><a href="git-with-branches.html"><i class="fa fa-check"></i><b>2.5</b> Git with branches</a></li>
<li class="chapter" data-level="2.6" data-path="collaborating-with-git.html"><a href="collaborating-with-git.html"><i class="fa fa-check"></i><b>2.6</b> Collaborating with Git</a></li>
<li class="chapter" data-level="2.7" data-path="protecting-branches.html"><a href="protecting-branches.html"><i class="fa fa-check"></i><b>2.7</b> Protecting branches</a></li>
<li class="chapter" data-level="2.8" data-path="help-faq.html"><a href="help-faq.html"><i class="fa fa-check"></i><b>2.8</b> Help! (FAQ)</a><ul>
<li class="chapter" data-level="2.8.1" data-path="help-faq.html"><a href="help-faq.html#general-workflow"><i class="fa fa-check"></i><b>2.8.1</b> General workflow</a></li>
<li class="chapter" data-level="2.8.2" data-path="help-faq.html"><a href="help-faq.html#git-push-rejected-master"><i class="fa fa-check"></i><b>2.8.2</b> Git push rejected (master)</a></li>
<li class="chapter" data-level="2.8.3" data-path="help-faq.html"><a href="help-faq.html#accidently-did-work-on-master"><i class="fa fa-check"></i><b>2.8.3</b> Accidently did work on <code>master</code>:</a></li>
<li class="chapter" data-level="2.8.4" data-path="help-faq.html"><a href="help-faq.html#get-changes-from-master-on-your-branch"><i class="fa fa-check"></i><b>2.8.4</b> Get changes from master on your branch</a></li>
<li class="chapter" data-level="2.8.5" data-path="help-faq.html"><a href="help-faq.html#remote-server-e.g.-gitlab-github-bitbucket-etc-shows-merge-conflict"><i class="fa fa-check"></i><b>2.8.5</b> Remote server (e.g., GitLab, GitHub, Bitbucket, etc) shows merge conflict</a></li>
<li class="chapter" data-level="2.8.6" data-path="help-faq.html"><a href="help-faq.html#remove-datafiles-from-history"><i class="fa fa-check"></i><b>2.8.6</b> Remove data/files from history</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV RStudio</b></span></li>
<li class="chapter" data-level="3" data-path="rstudio-1.html"><a href="rstudio-1.html"><i class="fa fa-check"></i><b>3</b> RStudio</a><ul>
<li class="chapter" data-level="3.1" data-path="accessing-folders.html"><a href="accessing-folders.html"><i class="fa fa-check"></i><b>3.1</b> Accessing folders</a><ul>
<li class="chapter" data-level="3.1.1" data-path="accessing-folders.html"><a href="accessing-folders.html#outside-of-home"><i class="fa fa-check"></i><b>3.1.1</b> Outside of Home</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>V R</b></span></li>
<li class="chapter" data-level="4" data-path="data-visualization.html"><a href="data-visualization.html"><i class="fa fa-check"></i><b>4</b> Data Visualization</a><ul>
<li class="chapter" data-level="4.1" data-path="loading-ggplot2.html"><a href="loading-ggplot2.html"><i class="fa fa-check"></i><b>4.1</b> Loading ggplot2</a></li>
<li class="chapter" data-level="4.2" data-path="creating-a-ggplot.html"><a href="creating-a-ggplot.html"><i class="fa fa-check"></i><b>4.2</b> Creating a ggplot</a></li>
<li class="chapter" data-level="4.3" data-path="aesthetic-mapings.html"><a href="aesthetic-mapings.html"><i class="fa fa-check"></i><b>4.3</b> Aesthetic Mapings</a></li>
<li class="chapter" data-level="4.4" data-path="facets.html"><a href="facets.html"><i class="fa fa-check"></i><b>4.4</b> Facets</a></li>
<li class="chapter" data-level="4.5" data-path="geometic-objects.html"><a href="geometic-objects.html"><i class="fa fa-check"></i><b>4.5</b> Geometic Objects</a></li>
<li class="chapter" data-level="4.6" data-path="statistical-transformations.html"><a href="statistical-transformations.html"><i class="fa fa-check"></i><b>4.6</b> Statistical Transformations</a></li>
<li class="chapter" data-level="4.7" data-path="position-adjustments.html"><a href="position-adjustments.html"><i class="fa fa-check"></i><b>4.7</b> Position Adjustments</a></li>
<li class="chapter" data-level="4.8" data-path="coordinate-systems.html"><a href="coordinate-systems.html"><i class="fa fa-check"></i><b>4.8</b> Coordinate Systems</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="importing-data.html"><a href="importing-data.html"><i class="fa fa-check"></i><b>5</b> Importing Data</a><ul>
<li class="chapter" data-level="5.1" data-path="loading-datasets.html"><a href="loading-datasets.html"><i class="fa fa-check"></i><b>5.1</b> Loading datasets</a></li>
<li class="chapter" data-level="5.2" data-path="writing-to-a-files.html"><a href="writing-to-a-files.html"><i class="fa fa-check"></i><b>5.2</b> Writing to a files</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="data-transformations.html"><a href="data-transformations.html"><i class="fa fa-check"></i><b>6</b> Data Transformations</a><ul>
<li class="chapter" data-level="6.1" data-path="dplyr-library.html"><a href="dplyr-library.html"><i class="fa fa-check"></i><b>6.1</b> <code>dplyr</code> library</a></li>
<li class="chapter" data-level="6.2" data-path="filter.html"><a href="filter.html"><i class="fa fa-check"></i><b>6.2</b> Filter</a></li>
<li class="chapter" data-level="6.3" data-path="comparison-operators.html"><a href="comparison-operators.html"><i class="fa fa-check"></i><b>6.3</b> Comparison (operators)</a></li>
<li class="chapter" data-level="6.4" data-path="logical-operators.html"><a href="logical-operators.html"><i class="fa fa-check"></i><b>6.4</b> Logical operators</a></li>
<li class="chapter" data-level="6.5" data-path="arrange.html"><a href="arrange.html"><i class="fa fa-check"></i><b>6.5</b> Arrange</a></li>
<li class="chapter" data-level="6.6" data-path="select.html"><a href="select.html"><i class="fa fa-check"></i><b>6.6</b> Select</a></li>
<li class="chapter" data-level="6.7" data-path="mutate.html"><a href="mutate.html"><i class="fa fa-check"></i><b>6.7</b> Mutate</a></li>
<li class="chapter" data-level="6.8" data-path="summarize-summarise.html"><a href="summarize-summarise.html"><i class="fa fa-check"></i><b>6.8</b> Summarize (summarise)</a></li>
<li class="chapter" data-level="6.9" data-path="groupby.html"><a href="groupby.html"><i class="fa fa-check"></i><b>6.9</b> Groupby</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="tidy-data.html"><a href="tidy-data.html"><i class="fa fa-check"></i><b>7</b> Tidy data</a><ul>
<li class="chapter" data-level="7.1" data-path="tidyr.html"><a href="tidyr.html"><i class="fa fa-check"></i><b>7.1</b> tidyr</a></li>
<li class="chapter" data-level="7.2" data-path="gather.html"><a href="gather.html"><i class="fa fa-check"></i><b>7.2</b> Gather</a></li>
<li class="chapter" data-level="7.3" data-path="primer-to-joins.html"><a href="primer-to-joins.html"><i class="fa fa-check"></i><b>7.3</b> Primer to joins</a></li>
<li class="chapter" data-level="7.4" data-path="spread.html"><a href="spread.html"><i class="fa fa-check"></i><b>7.4</b> Spread</a></li>
<li class="chapter" data-level="7.5" data-path="separate.html"><a href="separate.html"><i class="fa fa-check"></i><b>7.5</b> Separate</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="relational-data-in-r.html"><a href="relational-data-in-r.html"><i class="fa fa-check"></i><b>8</b> Relational Data in R</a><ul>
<li class="chapter" data-level="8.1" data-path="create-simple-datasets.html"><a href="create-simple-datasets.html"><i class="fa fa-check"></i><b>8.1</b> Create simple datasets</a></li>
<li class="chapter" data-level="8.2" data-path="one-to-one.html"><a href="one-to-one.html"><i class="fa fa-check"></i><b>8.2</b> one-to-one</a></li>
<li class="chapter" data-level="8.3" data-path="many-to-one-or-one-to-many.html"><a href="many-to-one-or-one-to-many.html"><i class="fa fa-check"></i><b>8.3</b> many to one OR one to many</a></li>
<li class="chapter" data-level="8.4" data-path="many-to-many.html"><a href="many-to-many.html"><i class="fa fa-check"></i><b>8.4</b> many to many</a></li>
<li class="chapter" data-level="8.5" data-path="multiple-keys.html"><a href="multiple-keys.html"><i class="fa fa-check"></i><b>8.5</b> Multiple keys</a></li>
<li class="chapter" data-level="8.6" data-path="different-column-names.html"><a href="different-column-names.html"><i class="fa fa-check"></i><b>8.6</b> Different column names</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="strings.html"><a href="strings.html"><i class="fa fa-check"></i><b>9</b> Strings</a><ul>
<li class="chapter" data-level="9.1" data-path="regular-expressions.html"><a href="regular-expressions.html"><i class="fa fa-check"></i><b>9.1</b> Regular Expressions</a><ul>
<li class="chapter" data-level="9.1.1" data-path="regular-expressions.html"><a href="regular-expressions.html#intro"><i class="fa fa-check"></i><b>9.1.1</b> Intro</a></li>
<li class="chapter" data-level="9.1.2" data-path="regular-expressions.html"><a href="regular-expressions.html#basic-web-scraping-example"><i class="fa fa-check"></i><b>9.1.2</b> Basic Web Scraping Example</a></li>
<li class="chapter" data-level="9.1.3" data-path="regular-expressions.html"><a href="regular-expressions.html#lookaround-examples"><i class="fa fa-check"></i><b>9.1.3</b> Lookaround Examples</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="factors.html"><a href="factors.html"><i class="fa fa-check"></i><b>10</b> Factors</a><ul>
<li class="chapter" data-level="10.1" data-path="forcats.html"><a href="forcats.html"><i class="fa fa-check"></i><b>10.1</b> forcats</a></li>
<li class="chapter" data-level="10.2" data-path="sorting.html"><a href="sorting.html"><i class="fa fa-check"></i><b>10.2</b> Sorting</a></li>
<li class="chapter" data-level="10.3" data-path="counting.html"><a href="counting.html"><i class="fa fa-check"></i><b>10.3</b> Counting</a></li>
<li class="chapter" data-level="10.4" data-path="re-ording-factors.html"><a href="re-ording-factors.html"><i class="fa fa-check"></i><b>10.4</b> Re-ording factors</a></li>
<li class="chapter" data-level="10.5" data-path="modifying-factor-values.html"><a href="modifying-factor-values.html"><i class="fa fa-check"></i><b>10.5</b> Modifying factor values</a><ul>
<li class="chapter" data-level="10.5.1" data-path="modifying-factor-values.html"><a href="modifying-factor-values.html#double-check-your-work"><i class="fa fa-check"></i><b>10.5.1</b> Double check your work</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="dates-and-times.html"><a href="dates-and-times.html"><i class="fa fa-check"></i><b>11</b> Dates and Times</a><ul>
<li class="chapter" data-level="11.1" data-path="lubridate.html"><a href="lubridate.html"><i class="fa fa-check"></i><b>11.1</b> lubridate</a></li>
<li class="chapter" data-level="11.2" data-path="making-datetimes-from-data.html"><a href="making-datetimes-from-data.html"><i class="fa fa-check"></i><b>11.2</b> Making datetimes from data</a></li>
<li class="chapter" data-level="11.3" data-path="non-standard-date-formatting.html"><a href="non-standard-date-formatting.html"><i class="fa fa-check"></i><b>11.3</b> Non-standard date formatting</a></li>
<li class="chapter" data-level="11.4" data-path="strptime-format-variables.html"><a href="strptime-format-variables.html"><i class="fa fa-check"></i><b>11.4</b> strptime format variables</a></li>
<li class="chapter" data-level="11.5" data-path="datetime-arithmetic.html"><a href="datetime-arithmetic.html"><i class="fa fa-check"></i><b>11.5</b> Datetime arithmetic</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="sql-databases.html"><a href="sql-databases.html"><i class="fa fa-check"></i><b>12</b> SQL Databases</a><ul>
<li class="chapter" data-level="12.1" data-path="databases-in-r.html"><a href="databases-in-r.html"><i class="fa fa-check"></i><b>12.1</b> Databases in R</a><ul>
<li class="chapter" data-level="12.1.1" data-path="databases-in-r.html"><a href="databases-in-r.html#create-reusable-connection-to-database"><i class="fa fa-check"></i><b>12.1.1</b> CREATE REUSABLE CONNECTION TO DATABASE</a></li>
<li class="chapter" data-level="12.1.2" data-path="databases-in-r.html"><a href="databases-in-r.html#write-data-to-database-tables"><i class="fa fa-check"></i><b>12.1.2</b> WRITE DATA TO DATABASE TABLES</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="joins.html"><a href="joins.html"><i class="fa fa-check"></i><b>12.2</b> Joins</a><ul>
<li class="chapter" data-level="12.2.1" data-path="joins.html"><a href="joins.html#join-tables-in-sql-with-dbi"><i class="fa fa-check"></i><b>12.2.1</b> JOIN TABLES IN SQL WITH DBI</a></li>
<li class="chapter" data-level="12.2.2" data-path="joins.html"><a href="joins.html#join-tables-in-sql-in-sql-chunk"><i class="fa fa-check"></i><b>12.2.2</b> JOIN TABLES IN SQL IN SQL CHUNK</a></li>
<li class="chapter" data-level="12.2.3" data-path="joins.html"><a href="joins.html#join-tables-in-sql-in-sql-chunk-with-output-variable"><i class="fa fa-check"></i><b>12.2.3</b> JOIN TABLES IN SQL IN SQL CHUNK WITH OUTPUT VARIABLE</a></li>
<li class="chapter" data-level="12.2.4" data-path="joins.html"><a href="joins.html#join-tables-in-sql-in-sql-chunk-apply-where-clause-and-fuzzy-search"><i class="fa fa-check"></i><b>12.2.4</b> JOIN TABLES IN SQL IN SQL CHUNK APPLY WHERE CLAUSE AND FUZZY SEARCH</a></li>
<li class="chapter" data-level="12.2.5" data-path="joins.html"><a href="joins.html#join-tables-in-sql-in-sql-chunk-apply-where-clause-with-and-and-fuzzy-search"><i class="fa fa-check"></i><b>12.2.5</b> JOIN TABLES IN SQL IN SQL CHUNK APPLY WHERE CLAUSE WITH ‘AND’ AND FUZZY SEARCH</a></li>
<li class="chapter" data-level="12.2.6" data-path="joins.html"><a href="joins.html#join-tables-in-sql-in-sql-chunk-apply-select-and-where-clause-with-and-and-fuzzy-search-and-order"><i class="fa fa-check"></i><b>12.2.6</b> JOIN TABLES IN SQL IN SQL CHUNK APPLY SELECT AND WHERE CLAUSE WITH ‘AND’ AND FUZZY SEARCH AND ORDER</a></li>
<li class="chapter" data-level="12.2.7" data-path="joins.html"><a href="joins.html#join-tables-in-sql-in-sql-chunk-apply-select-and-where-clause-and-fuzzy-search-and-order-and-group-by-with-aggregate-function"><i class="fa fa-check"></i><b>12.2.7</b> JOIN TABLES IN SQL IN SQL CHUNK APPLY SELECT AND WHERE CLAUSE AND FUZZY SEARCH AND ORDER AND GROUP BY WITH AGGREGATE FUNCTION</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="dplyr-and-data-table.html"><a href="dplyr-and-data-table.html"><i class="fa fa-check"></i><b>12.3</b> dplyr and data.table</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="vectors.html"><a href="vectors.html"><i class="fa fa-check"></i><b>13</b> Vectors</a><ul>
<li class="chapter" data-level="13.1" data-path="vectors-c.html"><a href="vectors-c.html"><i class="fa fa-check"></i><b>13.1</b> vectors (c)</a></li>
<li class="chapter" data-level="13.2" data-path="subsetting-vectors.html"><a href="subsetting-vectors.html"><i class="fa fa-check"></i><b>13.2</b> Subsetting vectors</a></li>
<li class="chapter" data-level="13.3" data-path="negative-indicies-drop-by-position.html"><a href="negative-indicies-drop-by-position.html"><i class="fa fa-check"></i><b>13.3</b> Negative indicies drop by position</a></li>
<li class="chapter" data-level="13.4" data-path="lists.html"><a href="lists.html"><i class="fa fa-check"></i><b>13.4</b> Lists</a></li>
<li class="chapter" data-level="13.5" data-path="named-vectors.html"><a href="named-vectors.html"><i class="fa fa-check"></i><b>13.5</b> Named vectors</a></li>
<li class="chapter" data-level="13.6" data-path="named-lists.html"><a href="named-lists.html"><i class="fa fa-check"></i><b>13.6</b> Named lists</a></li>
<li class="chapter" data-level="13.7" data-path="vectorization-broadcasting.html"><a href="vectorization-broadcasting.html"><i class="fa fa-check"></i><b>13.7</b> vectorization / broadcasting</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>14</b> Functions</a><ul>
<li class="chapter" data-level="14.1" data-path="writing-functions.html"><a href="writing-functions.html"><i class="fa fa-check"></i><b>14.1</b> Writing Functions</a><ul>
<li class="chapter" data-level="14.1.1" data-path="writing-functions.html"><a href="writing-functions.html#fahrenheit-to-kelvin"><i class="fa fa-check"></i><b>14.1.1</b> Fahrenheit to Kelvin</a></li>
<li class="chapter" data-level="14.1.2" data-path="writing-functions.html"><a href="writing-functions.html#kelvin-to-celsius"><i class="fa fa-check"></i><b>14.1.2</b> Kelvin to Celsius</a></li>
<li class="chapter" data-level="14.1.3" data-path="writing-functions.html"><a href="writing-functions.html#fahrenheit-to-celsius"><i class="fa fa-check"></i><b>14.1.3</b> Fahrenheit to Celsius</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="conditionals.html"><a href="conditionals.html"><i class="fa fa-check"></i><b>15</b> Conditionals</a><ul>
<li class="chapter" data-level="15.1" data-path="if-statements.html"><a href="if-statements.html"><i class="fa fa-check"></i><b>15.1</b> if statements</a></li>
<li class="chapter" data-level="15.2" data-path="if-else-statements.html"><a href="if-else-statements.html"><i class="fa fa-check"></i><b>15.2</b> If else statements</a></li>
<li class="chapter" data-level="15.3" data-path="dealing-with-na.html"><a href="dealing-with-na.html"><i class="fa fa-check"></i><b>15.3</b> Dealing with NA</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="iteration.html"><a href="iteration.html"><i class="fa fa-check"></i><b>16</b> Iteration</a><ul>
<li class="chapter" data-level="16.1" data-path="broadcasting.html"><a href="broadcasting.html"><i class="fa fa-check"></i><b>16.1</b> Broadcasting</a></li>
<li class="chapter" data-level="16.2" data-path="for-loops.html"><a href="for-loops.html"><i class="fa fa-check"></i><b>16.2</b> For loops</a><ul>
<li class="chapter" data-level="16.2.1" data-path="for-loops.html"><a href="for-loops.html#pre-allocating-in-a-loop"><i class="fa fa-check"></i><b>16.2.1</b> Pre allocating in a loop</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="purrr-map.html"><a href="purrr-map.html"><i class="fa fa-check"></i><b>16.3</b> purrr (map)</a></li>
<li class="chapter" data-level="16.4" data-path="apply-in-base-r.html"><a href="apply-in-base-r.html"><i class="fa fa-check"></i><b>16.4</b> Apply (in base R)</a><ul>
<li class="chapter" data-level="16.4.1" data-path="apply-in-base-r.html"><a href="apply-in-base-r.html#lapply"><i class="fa fa-check"></i><b>16.4.1</b> lapply</a></li>
<li class="chapter" data-level="16.4.2" data-path="apply-in-base-r.html"><a href="apply-in-base-r.html#sapply"><i class="fa fa-check"></i><b>16.4.2</b> sapply</a></li>
<li class="chapter" data-level="16.4.3" data-path="apply-in-base-r.html"><a href="apply-in-base-r.html#mapply"><i class="fa fa-check"></i><b>16.4.3</b> mapply</a></li>
<li class="chapter" data-level="16.4.4" data-path="apply-in-base-r.html"><a href="apply-in-base-r.html#apply-2-dimensions"><i class="fa fa-check"></i><b>16.4.4</b> apply (2-dimensions)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="r-dialects.html"><a href="r-dialects.html"><i class="fa fa-check"></i><b>17</b> R Dialects</a><ul>
<li class="chapter" data-level="17.1" data-path="data-frame.html"><a href="data-frame.html"><i class="fa fa-check"></i><b>17.1</b> data.frame</a><ul>
<li class="chapter" data-level="17.1.1" data-path="data-frame.html"><a href="data-frame.html#convert-to-dataframe"><i class="fa fa-check"></i><b>17.1.1</b> Convert to dataframe</a></li>
<li class="chapter" data-level="17.1.2" data-path="data-frame.html"><a href="data-frame.html#select-columns"><i class="fa fa-check"></i><b>17.1.2</b> Select columns</a></li>
<li class="chapter" data-level="17.1.3" data-path="data-frame.html"><a href="data-frame.html#select-column-as-dataframe"><i class="fa fa-check"></i><b>17.1.3</b> Select column as dataframe</a></li>
<li class="chapter" data-level="17.1.4" data-path="data-frame.html"><a href="data-frame.html#filtering-rows"><i class="fa fa-check"></i><b>17.1.4</b> Filtering rows</a></li>
<li class="chapter" data-level="17.1.5" data-path="data-frame.html"><a href="data-frame.html#filter-rows-and-select-columns"><i class="fa fa-check"></i><b>17.1.5</b> Filter rows and select columns</a></li>
<li class="chapter" data-level="17.1.6" data-path="data-frame.html"><a href="data-frame.html#works-with-dplyr"><i class="fa fa-check"></i><b>17.1.6</b> Works with dplyr</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>VI R Special Topics</b></span></li>
<li class="chapter" data-level="18" data-path="data-table.html"><a href="data-table.html"><i class="fa fa-check"></i><b>18</b> data.table</a><ul>
<li class="chapter" data-level="18.1" data-path="read-into-data-table.html"><a href="read-into-data-table.html"><i class="fa fa-check"></i><b>18.1</b> Read into data.table</a></li>
<li class="chapter" data-level="18.2" data-path="convert-to-data-table.html"><a href="convert-to-data-table.html"><i class="fa fa-check"></i><b>18.2</b> Convert to data.table</a></li>
<li class="chapter" data-level="18.3" data-path="working-with-data-table.html"><a href="working-with-data-table.html"><i class="fa fa-check"></i><b>18.3</b> Working with data.table</a><ul>
<li class="chapter" data-level="18.3.1" data-path="working-with-data-table.html"><a href="working-with-data-table.html#select-columns-list-."><i class="fa fa-check"></i><b>18.3.1</b> Select columns list() .()</a></li>
<li class="chapter" data-level="18.3.2" data-path="working-with-data-table.html"><a href="working-with-data-table.html#functions-on-columns"><i class="fa fa-check"></i><b>18.3.2</b> Functions on columns</a></li>
<li class="chapter" data-level="18.3.3" data-path="working-with-data-table.html"><a href="working-with-data-table.html#n-counts"><i class="fa fa-check"></i><b>18.3.3</b> .N (counts)</a></li>
<li class="chapter" data-level="18.3.4" data-path="working-with-data-table.html"><a href="working-with-data-table.html#using-dplyr"><i class="fa fa-check"></i><b>18.3.4</b> Using dplyr</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="19" data-path="spatial-data.html"><a href="spatial-data.html"><i class="fa fa-check"></i><b>19</b> Spatial Data</a></li>
<li class="chapter" data-level="20" data-path="apis-and-web-scraping.html"><a href="apis-and-web-scraping.html"><i class="fa fa-check"></i><b>20</b> APIs and Web Scraping</a><ul>
<li class="chapter" data-level="20.1" data-path="tables-from-websites-wikipedia.html"><a href="tables-from-websites-wikipedia.html"><i class="fa fa-check"></i><b>20.1</b> Tables from websites (wikipedia)</a></li>
<li class="chapter" data-level="20.2" data-path="websites-rvest.html"><a href="websites-rvest.html"><i class="fa fa-check"></i><b>20.2</b> Websites (rvest)</a></li>
<li class="chapter" data-level="20.3" data-path="selenium.html"><a href="selenium.html"><i class="fa fa-check"></i><b>20.3</b> Selenium</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="communication.html"><a href="communication.html"><i class="fa fa-check"></i><b>21</b> Communication</a></li>
<li class="chapter" data-level="22" data-path="shiny.html"><a href="shiny.html"><i class="fa fa-check"></i><b>22</b> Shiny</a></li>
<li class="chapter" data-level="23" data-path="text-mining.html"><a href="text-mining.html"><i class="fa fa-check"></i><b>23</b> Text Mining</a><ul>
<li class="chapter" data-level="23.1" data-path="one-token-per-row-unnest-tokens.html"><a href="one-token-per-row-unnest-tokens.html"><i class="fa fa-check"></i><b>23.1</b> One-token-per-row (unnest_tokens)</a></li>
<li class="chapter" data-level="23.2" data-path="jane-austen.html"><a href="jane-austen.html"><i class="fa fa-check"></i><b>23.2</b> Jane Austen</a></li>
<li class="chapter" data-level="23.3" data-path="stop-words-and-frequencies.html"><a href="stop-words-and-frequencies.html"><i class="fa fa-check"></i><b>23.3</b> Stop words and Frequencies</a></li>
<li class="chapter" data-level="23.4" data-path="gutenbergr-package.html"><a href="gutenbergr-package.html"><i class="fa fa-check"></i><b>23.4</b> gutenbergr package</a></li>
<li class="chapter" data-level="23.5" data-path="sentiment-analytis.html"><a href="sentiment-analytis.html"><i class="fa fa-check"></i><b>23.5</b> Sentiment Analytis</a></li>
<li class="chapter" data-level="23.6" data-path="tf-idf-term-frequency-inverse-document-frequency.html"><a href="tf-idf-term-frequency-inverse-document-frequency.html"><i class="fa fa-check"></i><b>23.6</b> tf-idf: Term frequency, inverse document frequency</a></li>
<li class="chapter" data-level="23.7" data-path="bind-tf-idf.html"><a href="bind-tf-idf.html"><i class="fa fa-check"></i><b>23.7</b> bind_tf_idf</a></li>
<li class="chapter" data-level="23.8" data-path="relationships-n-grams.html"><a href="relationships-n-grams.html"><i class="fa fa-check"></i><b>23.8</b> Relationships (n-grams)</a></li>
<li class="chapter" data-level="23.9" data-path="stemming.html"><a href="stemming.html"><i class="fa fa-check"></i><b>23.9</b> Stemming</a></li>
</ul></li>
<li class="part"><span><b>VII Modeling</b></span></li>
<li class="chapter" data-level="24" data-path="random-forests.html"><a href="random-forests.html"><i class="fa fa-check"></i><b>24</b> Random Forests</a><ul>
<li class="chapter" data-level="24.1" data-path="cart.html"><a href="cart.html"><i class="fa fa-check"></i><b>24.1</b> CART</a></li>
<li class="chapter" data-level="24.2" data-path="bootstrapping.html"><a href="bootstrapping.html"><i class="fa fa-check"></i><b>24.2</b> Bootstrapping</a></li>
<li class="chapter" data-level="24.3" data-path="bagging.html"><a href="bagging.html"><i class="fa fa-check"></i><b>24.3</b> Bagging</a></li>
<li class="chapter" data-level="24.4" data-path="viewing-random-forests.html"><a href="viewing-random-forests.html"><i class="fa fa-check"></i><b>24.4</b> Viewing Random Forests</a></li>
</ul></li>
<li class="part"><span><b>VIII Exercises</b></span></li>
<li class="part"><span><b>IX Back Matter</b></span></li>
<li class="chapter" data-level="" data-path="build-details.html"><a href="build-details.html"><i class="fa fa-check"></i>Build Details</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Training Manual for SDAL</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="cart" class="section level2">
<h2><span class="header-section-number">24.1</span> CART</h2>
<div class="sourceCode" id="cb353"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb353-1" data-line-number="1"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb353-2" data-line-number="2"><span class="kw">library</span>(tree)</a></code></pre></div>
<div class="sourceCode" id="cb354"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb354-1" data-line-number="1"><span class="co"># Data</span></a>
<a class="sourceLine" id="cb354-2" data-line-number="2"><span class="kw">summary</span>(iris)</a>
<a class="sourceLine" id="cb354-3" data-line-number="3"><span class="co">##   Sepal.Length    Sepal.Width     Petal.Length    Petal.Width   </span></a>
<a class="sourceLine" id="cb354-4" data-line-number="4"><span class="co">##  Min.   :4.300   Min.   :2.000   Min.   :1.000   Min.   :0.100  </span></a>
<a class="sourceLine" id="cb354-5" data-line-number="5"><span class="co">##  1st Qu.:5.100   1st Qu.:2.800   1st Qu.:1.600   1st Qu.:0.300  </span></a>
<a class="sourceLine" id="cb354-6" data-line-number="6"><span class="co">##  Median :5.800   Median :3.000   Median :4.350   Median :1.300  </span></a>
<a class="sourceLine" id="cb354-7" data-line-number="7"><span class="co">##  Mean   :5.843   Mean   :3.057   Mean   :3.758   Mean   :1.199  </span></a>
<a class="sourceLine" id="cb354-8" data-line-number="8"><span class="co">##  3rd Qu.:6.400   3rd Qu.:3.300   3rd Qu.:5.100   3rd Qu.:1.800  </span></a>
<a class="sourceLine" id="cb354-9" data-line-number="9"><span class="co">##  Max.   :7.900   Max.   :4.400   Max.   :6.900   Max.   :2.500  </span></a>
<a class="sourceLine" id="cb354-10" data-line-number="10"><span class="co">##        Species  </span></a>
<a class="sourceLine" id="cb354-11" data-line-number="11"><span class="co">##  setosa    :50  </span></a>
<a class="sourceLine" id="cb354-12" data-line-number="12"><span class="co">##  versicolor:50  </span></a>
<a class="sourceLine" id="cb354-13" data-line-number="13"><span class="co">##  virginica :50  </span></a>
<a class="sourceLine" id="cb354-14" data-line-number="14"><span class="co">##                 </span></a>
<a class="sourceLine" id="cb354-15" data-line-number="15"><span class="co">##                 </span></a>
<a class="sourceLine" id="cb354-16" data-line-number="16"><span class="co">## </span></a></code></pre></div>
<div class="sourceCode" id="cb355"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb355-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> iris) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">x =</span> Petal.Length, <span class="dt">y =</span> Petal.Width, <span class="dt">col =</span> Species))</a></code></pre></div>
<p><img src="330-CART_files/figure-html/unnamed-chunk-4-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>The idea behind CART is to divide the predictor space (petal width and length) with a straight line and fit simple models on either side of the line.</p>
<p>Mathematically, consider predictors <span class="math inline">\(X_j\)</span> and some split point <span class="math inline">\(s\)</span> that splits the predictor space into two half-spaces <span class="math display">\[L_{j, s} = \lbrace X |X_j \le s \rbrace \text{ and } R_{j, s} = \lbrace X |X_j &gt; s\rbrace\]</span>.</p>
<p>The idea is to split on the varible and at the location which minimizes some loss function: <span class="math display">\[min_{j, s}\lbrace loss(R_{j, s}) + loss(L_{j, s}) \rbrace\]</span>
For classification problems, the easiest model is ``majority wins’’ and the loss function is the number of misclassificed observations. For regression, the easiest model is the mean model, and the loss function is squared error loss.</p>
<div class="sourceCode" id="cb356"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb356-1" data-line-number="1"><span class="co"># Grow a tree</span></a>
<a class="sourceLine" id="cb356-2" data-line-number="2">classTree =<span class="st"> </span><span class="kw">tree</span>(Species <span class="op">~</span><span class="st"> </span>Sepal.Length <span class="op">+</span><span class="st"> </span>Sepal.Width <span class="op">+</span><span class="st"> </span>Petal.Length <span class="op">+</span><span class="st"> </span>Petal.Width, <span class="dt">data =</span> iris)</a></code></pre></div>
<div class="sourceCode" id="cb357"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb357-1" data-line-number="1"><span class="kw">summary</span>(classTree)</a>
<a class="sourceLine" id="cb357-2" data-line-number="2"><span class="co">## </span></a>
<a class="sourceLine" id="cb357-3" data-line-number="3"><span class="co">## Classification tree:</span></a>
<a class="sourceLine" id="cb357-4" data-line-number="4"><span class="co">## tree(formula = Species ~ Sepal.Length + Sepal.Width + Petal.Length + </span></a>
<a class="sourceLine" id="cb357-5" data-line-number="5"><span class="co">##     Petal.Width, data = iris)</span></a>
<a class="sourceLine" id="cb357-6" data-line-number="6"><span class="co">## Variables actually used in tree construction:</span></a>
<a class="sourceLine" id="cb357-7" data-line-number="7"><span class="co">## [1] &quot;Petal.Length&quot; &quot;Petal.Width&quot;  &quot;Sepal.Length&quot;</span></a>
<a class="sourceLine" id="cb357-8" data-line-number="8"><span class="co">## Number of terminal nodes:  6 </span></a>
<a class="sourceLine" id="cb357-9" data-line-number="9"><span class="co">## Residual mean deviance:  0.1253 = 18.05 / 144 </span></a>
<a class="sourceLine" id="cb357-10" data-line-number="10"><span class="co">## Misclassification error rate: 0.02667 = 4 / 150</span></a></code></pre></div>
<div class="sourceCode" id="cb358"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb358-1" data-line-number="1"><span class="kw">plot</span>(classTree)</a>
<a class="sourceLine" id="cb358-2" data-line-number="2"><span class="kw">text</span>(classTree)</a></code></pre></div>
<p><img src="330-CART_files/figure-html/unnamed-chunk-7-1.png" width="100%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb359"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb359-1" data-line-number="1"><span class="kw">table</span>(<span class="kw">predict</span>(classTree, <span class="dt">type =</span> <span class="st">&#39;class&#39;</span>), iris<span class="op">$</span>Species)</a>
<a class="sourceLine" id="cb359-2" data-line-number="2"><span class="co">##             </span></a>
<a class="sourceLine" id="cb359-3" data-line-number="3"><span class="co">##              setosa versicolor virginica</span></a>
<a class="sourceLine" id="cb359-4" data-line-number="4"><span class="co">##   setosa         50          0         0</span></a>
<a class="sourceLine" id="cb359-5" data-line-number="5"><span class="co">##   versicolor      0         47         1</span></a>
<a class="sourceLine" id="cb359-6" data-line-number="6"><span class="co">##   virginica       0          3        49</span></a></code></pre></div>
<p>Trees, left unattended, can easily overfit. Loss can always be reduced to zero by cutting the predictor space up enough. The two major ways to hadle this is the Bayesian approach of putting priors on trees, or a penalized loss function approach, which adds a penalty for more complex trees (mode leaves).</p>
<p>It’s common practice to grow a tree too large and then prune it back, rather than just stop growing the tree when it gets too complex. This explores tree space more thoroughly. Once we have our overgrown tree we remove terminal nodes and try to minimize a penalized loss function. For a tree with <span class="math inline">\(T\)</span> nodes labelled <span class="math inline">\(N_t\)</span> for <span class="math inline">\(t \in 1, \ldots, T\)</span> we want to minimize</p>
<p><span class="math display">\[k T + \sum_{t = 1}^{T}loss(N_t)\]</span>
where k is a parameter controlling the penalty on the tree size. Harsher penalties lead to smaller trees.</p>
<div class="sourceCode" id="cb360"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb360-1" data-line-number="1"><span class="co"># Prune that tree!</span></a>
<a class="sourceLine" id="cb360-2" data-line-number="2">prune =<span class="st"> </span><span class="kw">prune.tree</span>(classTree, <span class="dt">method =</span> <span class="st">&#39;misclass&#39;</span>)</a>
<a class="sourceLine" id="cb360-3" data-line-number="3">prune</a>
<a class="sourceLine" id="cb360-4" data-line-number="4"><span class="co">## $size</span></a>
<a class="sourceLine" id="cb360-5" data-line-number="5"><span class="co">## [1] 6 4 3 2 1</span></a>
<a class="sourceLine" id="cb360-6" data-line-number="6"><span class="co">## </span></a>
<a class="sourceLine" id="cb360-7" data-line-number="7"><span class="co">## $dev</span></a>
<a class="sourceLine" id="cb360-8" data-line-number="8"><span class="co">## [1]   4   4   6  50 100</span></a>
<a class="sourceLine" id="cb360-9" data-line-number="9"><span class="co">## </span></a>
<a class="sourceLine" id="cb360-10" data-line-number="10"><span class="co">## $k</span></a>
<a class="sourceLine" id="cb360-11" data-line-number="11"><span class="co">## [1] -Inf    0    2   44   50</span></a>
<a class="sourceLine" id="cb360-12" data-line-number="12"><span class="co">## </span></a>
<a class="sourceLine" id="cb360-13" data-line-number="13"><span class="co">## $method</span></a>
<a class="sourceLine" id="cb360-14" data-line-number="14"><span class="co">## [1] &quot;misclass&quot;</span></a>
<a class="sourceLine" id="cb360-15" data-line-number="15"><span class="co">## </span></a>
<a class="sourceLine" id="cb360-16" data-line-number="16"><span class="co">## attr(,&quot;class&quot;)</span></a>
<a class="sourceLine" id="cb360-17" data-line-number="17"><span class="co">## [1] &quot;prune&quot;         &quot;tree.sequence&quot;</span></a></code></pre></div>
<div class="sourceCode" id="cb361"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb361-1" data-line-number="1"><span class="kw">plot</span>(prune<span class="op">$</span>size, prune<span class="op">$</span>dev, <span class="dt">main =</span> <span class="st">&quot;Scree/Elbow Plot&quot;</span>, <span class="dt">xlab =</span> <span class="st">&quot;Number of Leaves&quot;</span>, <span class="dt">ylab =</span> <span class="st">&quot;Misclassifications&quot;</span>)</a></code></pre></div>
<p><img src="330-CART_files/figure-html/unnamed-chunk-10-1.png" width="100%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb362"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb362-1" data-line-number="1"><span class="co"># Cross validation</span></a>
<a class="sourceLine" id="cb362-2" data-line-number="2">cvTree =<span class="st"> </span><span class="kw">cv.tree</span>(classTree, <span class="dt">method =</span> <span class="st">&#39;misclass&#39;</span>)</a>
<a class="sourceLine" id="cb362-3" data-line-number="3">cvTree</a>
<a class="sourceLine" id="cb362-4" data-line-number="4"><span class="co">## $size</span></a>
<a class="sourceLine" id="cb362-5" data-line-number="5"><span class="co">## [1] 6 4 3 2 1</span></a>
<a class="sourceLine" id="cb362-6" data-line-number="6"><span class="co">## </span></a>
<a class="sourceLine" id="cb362-7" data-line-number="7"><span class="co">## $dev</span></a>
<a class="sourceLine" id="cb362-8" data-line-number="8"><span class="co">## [1]   6   6   8  98 119</span></a>
<a class="sourceLine" id="cb362-9" data-line-number="9"><span class="co">## </span></a>
<a class="sourceLine" id="cb362-10" data-line-number="10"><span class="co">## $k</span></a>
<a class="sourceLine" id="cb362-11" data-line-number="11"><span class="co">## [1] -Inf    0    2   44   50</span></a>
<a class="sourceLine" id="cb362-12" data-line-number="12"><span class="co">## </span></a>
<a class="sourceLine" id="cb362-13" data-line-number="13"><span class="co">## $method</span></a>
<a class="sourceLine" id="cb362-14" data-line-number="14"><span class="co">## [1] &quot;misclass&quot;</span></a>
<a class="sourceLine" id="cb362-15" data-line-number="15"><span class="co">## </span></a>
<a class="sourceLine" id="cb362-16" data-line-number="16"><span class="co">## attr(,&quot;class&quot;)</span></a>
<a class="sourceLine" id="cb362-17" data-line-number="17"><span class="co">## [1] &quot;prune&quot;         &quot;tree.sequence&quot;</span></a></code></pre></div>
<div class="sourceCode" id="cb363"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb363-1" data-line-number="1"><span class="kw">plot</span>(prune<span class="op">$</span>size, prune<span class="op">$</span>dev, <span class="dt">main =</span> <span class="st">&quot;Scree/Elbow Plot&quot;</span>, <span class="dt">xlab =</span> <span class="st">&quot;Number of Leaves&quot;</span>, <span class="dt">ylab =</span> <span class="st">&quot;Misclassifications&quot;</span>, <span class="dt">type =</span> <span class="st">&#39;b&#39;</span>)</a>
<a class="sourceLine" id="cb363-2" data-line-number="2"><span class="kw">points</span>(cvTree<span class="op">$</span>size, cvTree<span class="op">$</span>dev, <span class="dt">type =</span> <span class="st">&#39;b&#39;</span>, <span class="dt">pch =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb363-3" data-line-number="3"><span class="kw">legend</span>(<span class="st">&quot;topright&quot;</span>, <span class="dt">pch =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dt">legend =</span> <span class="kw">c</span>(<span class="st">&quot;Pruned&quot;</span>, <span class="st">&quot;Cross Validated&quot;</span>), <span class="dt">bty =</span> <span class="st">&#39;n&#39;</span>)</a></code></pre></div>
<p><img src="330-CART_files/figure-html/unnamed-chunk-12-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>Other methods use a significance test approach to determining whether or not to split. For each variable, the model performs a univariate hypothesis test and splits on the variable with the lowest p-value. If no null hypotheses can be rejected, the tree stops splitting.</p>
<div class="sourceCode" id="cb364"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb364-1" data-line-number="1"><span class="kw">library</span>(party)</a></code></pre></div>
<div class="sourceCode" id="cb365"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb365-1" data-line-number="1">ciTree =<span class="st"> </span><span class="kw">ctree</span>(Species <span class="op">~</span><span class="st"> </span>Sepal.Length <span class="op">+</span><span class="st"> </span>Sepal.Width <span class="op">+</span><span class="st"> </span>Petal.Length <span class="op">+</span><span class="st"> </span>Petal.Width, <span class="dt">data =</span> iris)</a>
<a class="sourceLine" id="cb365-2" data-line-number="2">ciTree</a>
<a class="sourceLine" id="cb365-3" data-line-number="3"><span class="co">## </span></a>
<a class="sourceLine" id="cb365-4" data-line-number="4"><span class="co">##   Conditional inference tree with 4 terminal nodes</span></a>
<a class="sourceLine" id="cb365-5" data-line-number="5"><span class="co">## </span></a>
<a class="sourceLine" id="cb365-6" data-line-number="6"><span class="co">## Response:  Species </span></a>
<a class="sourceLine" id="cb365-7" data-line-number="7"><span class="co">## Inputs:  Sepal.Length, Sepal.Width, Petal.Length, Petal.Width </span></a>
<a class="sourceLine" id="cb365-8" data-line-number="8"><span class="co">## Number of observations:  150 </span></a>
<a class="sourceLine" id="cb365-9" data-line-number="9"><span class="co">## </span></a>
<a class="sourceLine" id="cb365-10" data-line-number="10"><span class="co">## 1) Petal.Length &lt;= 1.9; criterion = 1, statistic = 140.264</span></a>
<a class="sourceLine" id="cb365-11" data-line-number="11"><span class="co">##   2)*  weights = 50 </span></a>
<a class="sourceLine" id="cb365-12" data-line-number="12"><span class="co">## 1) Petal.Length &gt; 1.9</span></a>
<a class="sourceLine" id="cb365-13" data-line-number="13"><span class="co">##   3) Petal.Width &lt;= 1.7; criterion = 1, statistic = 67.894</span></a>
<a class="sourceLine" id="cb365-14" data-line-number="14"><span class="co">##     4) Petal.Length &lt;= 4.8; criterion = 0.999, statistic = 13.865</span></a>
<a class="sourceLine" id="cb365-15" data-line-number="15"><span class="co">##       5)*  weights = 46 </span></a>
<a class="sourceLine" id="cb365-16" data-line-number="16"><span class="co">##     4) Petal.Length &gt; 4.8</span></a>
<a class="sourceLine" id="cb365-17" data-line-number="17"><span class="co">##       6)*  weights = 8 </span></a>
<a class="sourceLine" id="cb365-18" data-line-number="18"><span class="co">##   3) Petal.Width &gt; 1.7</span></a>
<a class="sourceLine" id="cb365-19" data-line-number="19"><span class="co">##     7)*  weights = 46</span></a></code></pre></div>
<div class="sourceCode" id="cb366"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb366-1" data-line-number="1"><span class="kw">plot</span>(ciTree)</a></code></pre></div>
<p><img src="330-CART_files/figure-html/unnamed-chunk-15-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>A main advantage of trees is their ease of interpretability and use.</p>
<div class="sourceCode" id="cb367"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb367-1" data-line-number="1"><span class="kw">library</span>(DAAG)</a>
<a class="sourceLine" id="cb367-2" data-line-number="2"><span class="kw">data</span>(spam7)</a>
<a class="sourceLine" id="cb367-3" data-line-number="3"><span class="kw">head</span>(spam7)</a>
<a class="sourceLine" id="cb367-4" data-line-number="4"><span class="co">##   crl.tot dollar  bang money n000 make yesno</span></a>
<a class="sourceLine" id="cb367-5" data-line-number="5"><span class="co">## 1     278  0.000 0.778  0.00 0.00 0.00     y</span></a>
<a class="sourceLine" id="cb367-6" data-line-number="6"><span class="co">## 2    1028  0.180 0.372  0.43 0.43 0.21     y</span></a>
<a class="sourceLine" id="cb367-7" data-line-number="7"><span class="co">## 3    2259  0.184 0.276  0.06 1.16 0.06     y</span></a>
<a class="sourceLine" id="cb367-8" data-line-number="8"><span class="co">## 4     191  0.000 0.137  0.00 0.00 0.00     y</span></a>
<a class="sourceLine" id="cb367-9" data-line-number="9"><span class="co">## 5     191  0.000 0.135  0.00 0.00 0.00     y</span></a>
<a class="sourceLine" id="cb367-10" data-line-number="10"><span class="co">## 6      54  0.000 0.000  0.00 0.00 0.00     y</span></a></code></pre></div>
<div class="sourceCode" id="cb368"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb368-1" data-line-number="1">spamTree =<span class="st"> </span><span class="kw">ctree</span>(yesno <span class="op">~</span>., <span class="dt">data =</span> spam7)</a>
<a class="sourceLine" id="cb368-2" data-line-number="2">spamTree</a>
<a class="sourceLine" id="cb368-3" data-line-number="3"><span class="co">## </span></a>
<a class="sourceLine" id="cb368-4" data-line-number="4"><span class="co">##   Conditional inference tree with 20 terminal nodes</span></a>
<a class="sourceLine" id="cb368-5" data-line-number="5"><span class="co">## </span></a>
<a class="sourceLine" id="cb368-6" data-line-number="6"><span class="co">## Response:  yesno </span></a>
<a class="sourceLine" id="cb368-7" data-line-number="7"><span class="co">## Inputs:  crl.tot, dollar, bang, money, n000, make </span></a>
<a class="sourceLine" id="cb368-8" data-line-number="8"><span class="co">## Number of observations:  4601 </span></a>
<a class="sourceLine" id="cb368-9" data-line-number="9"><span class="co">## </span></a>
<a class="sourceLine" id="cb368-10" data-line-number="10"><span class="co">## 1) n000 &lt;= 0.12; criterion = 1, statistic = 515.579</span></a>
<a class="sourceLine" id="cb368-11" data-line-number="11"><span class="co">##   2) dollar &lt;= 0.055; criterion = 1, statistic = 393.255</span></a>
<a class="sourceLine" id="cb368-12" data-line-number="12"><span class="co">##     3) bang &lt;= 0.102; criterion = 1, statistic = 129.53</span></a>
<a class="sourceLine" id="cb368-13" data-line-number="13"><span class="co">##       4) bang &lt;= 0.028; criterion = 1, statistic = 29.259</span></a>
<a class="sourceLine" id="cb368-14" data-line-number="14"><span class="co">##         5) money &lt;= 0.13; criterion = 0.998, statistic = 12.684</span></a>
<a class="sourceLine" id="cb368-15" data-line-number="15"><span class="co">##           6)*  weights = 2154 </span></a>
<a class="sourceLine" id="cb368-16" data-line-number="16"><span class="co">##         5) money &gt; 0.13</span></a>
<a class="sourceLine" id="cb368-17" data-line-number="17"><span class="co">##           7)*  weights = 24 </span></a>
<a class="sourceLine" id="cb368-18" data-line-number="18"><span class="co">##       4) bang &gt; 0.028</span></a>
<a class="sourceLine" id="cb368-19" data-line-number="19"><span class="co">##         8) money &lt;= 0; criterion = 1, statistic = 23.253</span></a>
<a class="sourceLine" id="cb368-20" data-line-number="20"><span class="co">##           9) bang &lt;= 0.034; criterion = 0.953, statistic = 7.03</span></a>
<a class="sourceLine" id="cb368-21" data-line-number="21"><span class="co">##             10)*  weights = 19 </span></a>
<a class="sourceLine" id="cb368-22" data-line-number="22"><span class="co">##           9) bang &gt; 0.034</span></a>
<a class="sourceLine" id="cb368-23" data-line-number="23"><span class="co">##             11) dollar &lt;= 0.04; criterion = 0.982, statistic = 8.779</span></a>
<a class="sourceLine" id="cb368-24" data-line-number="24"><span class="co">##               12)*  weights = 170 </span></a>
<a class="sourceLine" id="cb368-25" data-line-number="25"><span class="co">##             11) dollar &gt; 0.04</span></a>
<a class="sourceLine" id="cb368-26" data-line-number="26"><span class="co">##               13)*  weights = 15 </span></a>
<a class="sourceLine" id="cb368-27" data-line-number="27"><span class="co">##         8) money &gt; 0</span></a>
<a class="sourceLine" id="cb368-28" data-line-number="28"><span class="co">##           14)*  weights = 21 </span></a>
<a class="sourceLine" id="cb368-29" data-line-number="29"><span class="co">##     3) bang &gt; 0.102</span></a>
<a class="sourceLine" id="cb368-30" data-line-number="30"><span class="co">##       15) crl.tot &lt;= 86; criterion = 1, statistic = 64.968</span></a>
<a class="sourceLine" id="cb368-31" data-line-number="31"><span class="co">##         16) crl.tot &lt;= 51; criterion = 1, statistic = 24.737</span></a>
<a class="sourceLine" id="cb368-32" data-line-number="32"><span class="co">##           17) money &lt;= 1.16; criterion = 1, statistic = 19.282</span></a>
<a class="sourceLine" id="cb368-33" data-line-number="33"><span class="co">##             18)*  weights = 330 </span></a>
<a class="sourceLine" id="cb368-34" data-line-number="34"><span class="co">##           17) money &gt; 1.16</span></a>
<a class="sourceLine" id="cb368-35" data-line-number="35"><span class="co">##             19)*  weights = 8 </span></a>
<a class="sourceLine" id="cb368-36" data-line-number="36"><span class="co">##         16) crl.tot &gt; 51</span></a>
<a class="sourceLine" id="cb368-37" data-line-number="37"><span class="co">##           20)*  weights = 184 </span></a>
<a class="sourceLine" id="cb368-38" data-line-number="38"><span class="co">##       15) crl.tot &gt; 86</span></a>
<a class="sourceLine" id="cb368-39" data-line-number="39"><span class="co">##         21) bang &lt;= 0.471; criterion = 1, statistic = 37.344</span></a>
<a class="sourceLine" id="cb368-40" data-line-number="40"><span class="co">##           22) money &lt;= 0; criterion = 1, statistic = 20.151</span></a>
<a class="sourceLine" id="cb368-41" data-line-number="41"><span class="co">##             23) crl.tot &lt;= 321; criterion = 0.963, statistic = 7.487</span></a>
<a class="sourceLine" id="cb368-42" data-line-number="42"><span class="co">##               24)*  weights = 152 </span></a>
<a class="sourceLine" id="cb368-43" data-line-number="43"><span class="co">##             23) crl.tot &gt; 321</span></a>
<a class="sourceLine" id="cb368-44" data-line-number="44"><span class="co">##               25)*  weights = 58 </span></a>
<a class="sourceLine" id="cb368-45" data-line-number="45"><span class="co">##           22) money &gt; 0</span></a>
<a class="sourceLine" id="cb368-46" data-line-number="46"><span class="co">##             26)*  weights = 43 </span></a>
<a class="sourceLine" id="cb368-47" data-line-number="47"><span class="co">##         21) bang &gt; 0.471</span></a>
<a class="sourceLine" id="cb368-48" data-line-number="48"><span class="co">##           27)*  weights = 180 </span></a>
<a class="sourceLine" id="cb368-49" data-line-number="49"><span class="co">##   2) dollar &gt; 0.055</span></a>
<a class="sourceLine" id="cb368-50" data-line-number="50"><span class="co">##     28) bang &lt;= 0.075; criterion = 1, statistic = 35.434</span></a>
<a class="sourceLine" id="cb368-51" data-line-number="51"><span class="co">##       29) money &lt;= 0.16; criterion = 1, statistic = 27.115</span></a>
<a class="sourceLine" id="cb368-52" data-line-number="52"><span class="co">##         30)*  weights = 138 </span></a>
<a class="sourceLine" id="cb368-53" data-line-number="53"><span class="co">##       29) money &gt; 0.16</span></a>
<a class="sourceLine" id="cb368-54" data-line-number="54"><span class="co">##         31)*  weights = 67 </span></a>
<a class="sourceLine" id="cb368-55" data-line-number="55"><span class="co">##     28) bang &gt; 0.075</span></a>
<a class="sourceLine" id="cb368-56" data-line-number="56"><span class="co">##       32)*  weights = 436 </span></a>
<a class="sourceLine" id="cb368-57" data-line-number="57"><span class="co">## 1) n000 &gt; 0.12</span></a>
<a class="sourceLine" id="cb368-58" data-line-number="58"><span class="co">##   33) bang &lt;= 0; criterion = 1, statistic = 21.155</span></a>
<a class="sourceLine" id="cb368-59" data-line-number="59"><span class="co">##     34)*  weights = 49 </span></a>
<a class="sourceLine" id="cb368-60" data-line-number="60"><span class="co">##   33) bang &gt; 0</span></a>
<a class="sourceLine" id="cb368-61" data-line-number="61"><span class="co">##     35) n000 &lt;= 0.25; criterion = 0.973, statistic = 8.025</span></a>
<a class="sourceLine" id="cb368-62" data-line-number="62"><span class="co">##       36) n000 &lt;= 0.19; criterion = 0.96, statistic = 7.343</span></a>
<a class="sourceLine" id="cb368-63" data-line-number="63"><span class="co">##         37)*  weights = 43 </span></a>
<a class="sourceLine" id="cb368-64" data-line-number="64"><span class="co">##       36) n000 &gt; 0.19</span></a>
<a class="sourceLine" id="cb368-65" data-line-number="65"><span class="co">##         38)*  weights = 21 </span></a>
<a class="sourceLine" id="cb368-66" data-line-number="66"><span class="co">##     35) n000 &gt; 0.25</span></a>
<a class="sourceLine" id="cb368-67" data-line-number="67"><span class="co">##       39)*  weights = 489</span></a></code></pre></div>
<div class="sourceCode" id="cb369"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb369-1" data-line-number="1"><span class="kw">plot</span>(spamTree)</a></code></pre></div>
<p><img src="330-CART_files/figure-html/unnamed-chunk-18-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>Let’s predict an email!</p>
<p>How well does it predict?</p>
<div class="sourceCode" id="cb370"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb370-1" data-line-number="1">spamTreeConfusionMatrix =<span class="st"> </span><span class="kw">table</span>(<span class="kw">predict</span>(spamTree, spam7), spam7<span class="op">$</span>yesno)</a>
<a class="sourceLine" id="cb370-2" data-line-number="2">spamTreeConfusionMatrix</a>
<a class="sourceLine" id="cb370-3" data-line-number="3"><span class="co">##    </span></a>
<a class="sourceLine" id="cb370-4" data-line-number="4"><span class="co">##        n    y</span></a>
<a class="sourceLine" id="cb370-5" data-line-number="5"><span class="co">##   n 2683  503</span></a>
<a class="sourceLine" id="cb370-6" data-line-number="6"><span class="co">##   y  105 1310</span></a></code></pre></div>
<div class="sourceCode" id="cb371"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb371-1" data-line-number="1"><span class="kw">sum</span>(<span class="kw">diag</span>(spamTreeConfusionMatrix))<span class="op">/</span><span class="kw">sum</span>(spamTreeConfusionMatrix) <span class="co">#86.7%</span></a>
<a class="sourceLine" id="cb371-2" data-line-number="2"><span class="co">## [1] 0.8678548</span></a></code></pre></div>
<div class="sourceCode" id="cb372"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb372-1" data-line-number="1"><span class="co"># Let&#39;s do a simple cross validation</span></a>
<a class="sourceLine" id="cb372-2" data-line-number="2">inSampleProp =<span class="st"> </span><span class="fl">.85</span></a>
<a class="sourceLine" id="cb372-3" data-line-number="3">inSampleIndicator =<span class="st"> </span><span class="kw">sample</span>(<span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>), <span class="dt">size =</span> <span class="kw">nrow</span>(spam7), <span class="dt">replace =</span> <span class="ot">TRUE</span>, <span class="dt">prob =</span> <span class="kw">c</span>(inSampleProp, <span class="dv">1</span> <span class="op">-</span><span class="st"> </span>inSampleProp))</a>
<a class="sourceLine" id="cb372-4" data-line-number="4">trainingSet =<span class="st"> </span>spam7[inSampleIndicator,]</a>
<a class="sourceLine" id="cb372-5" data-line-number="5">testingSet =<span class="st"> </span>spam7[<span class="op">!</span>inSampleIndicator,]</a>
<a class="sourceLine" id="cb372-6" data-line-number="6">trainingTree =<span class="st"> </span><span class="kw">ctree</span>(yesno <span class="op">~</span>., <span class="dt">data =</span> trainingSet)</a>
<a class="sourceLine" id="cb372-7" data-line-number="7">trainingTree</a>
<a class="sourceLine" id="cb372-8" data-line-number="8"><span class="co">## </span></a>
<a class="sourceLine" id="cb372-9" data-line-number="9"><span class="co">##   Conditional inference tree with 20 terminal nodes</span></a>
<a class="sourceLine" id="cb372-10" data-line-number="10"><span class="co">## </span></a>
<a class="sourceLine" id="cb372-11" data-line-number="11"><span class="co">## Response:  yesno </span></a>
<a class="sourceLine" id="cb372-12" data-line-number="12"><span class="co">## Inputs:  crl.tot, dollar, bang, money, n000, make </span></a>
<a class="sourceLine" id="cb372-13" data-line-number="13"><span class="co">## Number of observations:  3906 </span></a>
<a class="sourceLine" id="cb372-14" data-line-number="14"><span class="co">## </span></a>
<a class="sourceLine" id="cb372-15" data-line-number="15"><span class="co">## 1) dollar &lt;= 0.055; criterion = 1, statistic = 474.384</span></a>
<a class="sourceLine" id="cb372-16" data-line-number="16"><span class="co">##   2) bang &lt;= 0.085; criterion = 1, statistic = 107.911</span></a>
<a class="sourceLine" id="cb372-17" data-line-number="17"><span class="co">##     3) bang &lt;= 0.028; criterion = 1, statistic = 22.15</span></a>
<a class="sourceLine" id="cb372-18" data-line-number="18"><span class="co">##       4) n000 &lt;= 0.11; criterion = 1, statistic = 16.097</span></a>
<a class="sourceLine" id="cb372-19" data-line-number="19"><span class="co">##         5) money &lt;= 0.03; criterion = 0.998, statistic = 12.534</span></a>
<a class="sourceLine" id="cb372-20" data-line-number="20"><span class="co">##           6)*  weights = 1794 </span></a>
<a class="sourceLine" id="cb372-21" data-line-number="21"><span class="co">##         5) money &gt; 0.03</span></a>
<a class="sourceLine" id="cb372-22" data-line-number="22"><span class="co">##           7)*  weights = 23 </span></a>
<a class="sourceLine" id="cb372-23" data-line-number="23"><span class="co">##       4) n000 &gt; 0.11</span></a>
<a class="sourceLine" id="cb372-24" data-line-number="24"><span class="co">##         8)*  weights = 31 </span></a>
<a class="sourceLine" id="cb372-25" data-line-number="25"><span class="co">##     3) bang &gt; 0.028</span></a>
<a class="sourceLine" id="cb372-26" data-line-number="26"><span class="co">##       9)*  weights = 161 </span></a>
<a class="sourceLine" id="cb372-27" data-line-number="27"><span class="co">##   2) bang &gt; 0.085</span></a>
<a class="sourceLine" id="cb372-28" data-line-number="28"><span class="co">##     10) crl.tot &lt;= 85; criterion = 1, statistic = 70.548</span></a>
<a class="sourceLine" id="cb372-29" data-line-number="29"><span class="co">##       11) crl.tot &lt;= 51; criterion = 1, statistic = 19.938</span></a>
<a class="sourceLine" id="cb372-30" data-line-number="30"><span class="co">##         12) money &lt;= 0.48; criterion = 1, statistic = 16.228</span></a>
<a class="sourceLine" id="cb372-31" data-line-number="31"><span class="co">##           13)*  weights = 293 </span></a>
<a class="sourceLine" id="cb372-32" data-line-number="32"><span class="co">##         12) money &gt; 0.48</span></a>
<a class="sourceLine" id="cb372-33" data-line-number="33"><span class="co">##           14)*  weights = 7 </span></a>
<a class="sourceLine" id="cb372-34" data-line-number="34"><span class="co">##       11) crl.tot &gt; 51</span></a>
<a class="sourceLine" id="cb372-35" data-line-number="35"><span class="co">##         15)*  weights = 169 </span></a>
<a class="sourceLine" id="cb372-36" data-line-number="36"><span class="co">##     10) crl.tot &gt; 85</span></a>
<a class="sourceLine" id="cb372-37" data-line-number="37"><span class="co">##       16) bang &lt;= 0.448; criterion = 1, statistic = 36.142</span></a>
<a class="sourceLine" id="cb372-38" data-line-number="38"><span class="co">##         17) money &lt;= 0; criterion = 1, statistic = 17.308</span></a>
<a class="sourceLine" id="cb372-39" data-line-number="39"><span class="co">##           18) n000 &lt;= 0.1; criterion = 0.955, statistic = 7.13</span></a>
<a class="sourceLine" id="cb372-40" data-line-number="40"><span class="co">##             19) crl.tot &lt;= 321; criterion = 0.972, statistic = 7.991</span></a>
<a class="sourceLine" id="cb372-41" data-line-number="41"><span class="co">##               20)*  weights = 142 </span></a>
<a class="sourceLine" id="cb372-42" data-line-number="42"><span class="co">##             19) crl.tot &gt; 321</span></a>
<a class="sourceLine" id="cb372-43" data-line-number="43"><span class="co">##               21)*  weights = 54 </span></a>
<a class="sourceLine" id="cb372-44" data-line-number="44"><span class="co">##           18) n000 &gt; 0.1</span></a>
<a class="sourceLine" id="cb372-45" data-line-number="45"><span class="co">##             22)*  weights = 10 </span></a>
<a class="sourceLine" id="cb372-46" data-line-number="46"><span class="co">##         17) money &gt; 0</span></a>
<a class="sourceLine" id="cb372-47" data-line-number="47"><span class="co">##           23) money &lt;= 1.05; criterion = 0.984, statistic = 8.964</span></a>
<a class="sourceLine" id="cb372-48" data-line-number="48"><span class="co">##             24)*  weights = 62 </span></a>
<a class="sourceLine" id="cb372-49" data-line-number="49"><span class="co">##           23) money &gt; 1.05</span></a>
<a class="sourceLine" id="cb372-50" data-line-number="50"><span class="co">##             25)*  weights = 7 </span></a>
<a class="sourceLine" id="cb372-51" data-line-number="51"><span class="co">##       16) bang &gt; 0.448</span></a>
<a class="sourceLine" id="cb372-52" data-line-number="52"><span class="co">##         26)*  weights = 181 </span></a>
<a class="sourceLine" id="cb372-53" data-line-number="53"><span class="co">## 1) dollar &gt; 0.055</span></a>
<a class="sourceLine" id="cb372-54" data-line-number="54"><span class="co">##   27) bang &lt;= 0.049; criterion = 1, statistic = 39.757</span></a>
<a class="sourceLine" id="cb372-55" data-line-number="55"><span class="co">##     28) n000 &lt;= 0.39; criterion = 1, statistic = 22.383</span></a>
<a class="sourceLine" id="cb372-56" data-line-number="56"><span class="co">##       29) money &lt;= 0.16; criterion = 1, statistic = 22.929</span></a>
<a class="sourceLine" id="cb372-57" data-line-number="57"><span class="co">##         30)*  weights = 114 </span></a>
<a class="sourceLine" id="cb372-58" data-line-number="58"><span class="co">##       29) money &gt; 0.16</span></a>
<a class="sourceLine" id="cb372-59" data-line-number="59"><span class="co">##         31)*  weights = 53 </span></a>
<a class="sourceLine" id="cb372-60" data-line-number="60"><span class="co">##     28) n000 &gt; 0.39</span></a>
<a class="sourceLine" id="cb372-61" data-line-number="61"><span class="co">##       32)*  weights = 35 </span></a>
<a class="sourceLine" id="cb372-62" data-line-number="62"><span class="co">##   27) bang &gt; 0.049</span></a>
<a class="sourceLine" id="cb372-63" data-line-number="63"><span class="co">##     33) crl.tot &lt;= 39; criterion = 0.994, statistic = 10.79</span></a>
<a class="sourceLine" id="cb372-64" data-line-number="64"><span class="co">##       34)*  weights = 16 </span></a>
<a class="sourceLine" id="cb372-65" data-line-number="65"><span class="co">##     33) crl.tot &gt; 39</span></a>
<a class="sourceLine" id="cb372-66" data-line-number="66"><span class="co">##       35) crl.tot &lt;= 411; criterion = 0.981, statistic = 8.653</span></a>
<a class="sourceLine" id="cb372-67" data-line-number="67"><span class="co">##         36) bang &lt;= 0.407; criterion = 0.994, statistic = 10.723</span></a>
<a class="sourceLine" id="cb372-68" data-line-number="68"><span class="co">##           37)*  weights = 220 </span></a>
<a class="sourceLine" id="cb372-69" data-line-number="69"><span class="co">##         36) bang &gt; 0.407</span></a>
<a class="sourceLine" id="cb372-70" data-line-number="70"><span class="co">##           38)*  weights = 189 </span></a>
<a class="sourceLine" id="cb372-71" data-line-number="71"><span class="co">##       35) crl.tot &gt; 411</span></a>
<a class="sourceLine" id="cb372-72" data-line-number="72"><span class="co">##         39)*  weights = 345</span></a></code></pre></div>
<div class="sourceCode" id="cb373"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb373-1" data-line-number="1"><span class="kw">plot</span>(trainingTree)</a></code></pre></div>
<p><img src="330-CART_files/figure-html/unnamed-chunk-22-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>Now we can do a more fair out of sample calculation</p>
<div class="sourceCode" id="cb374"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb374-1" data-line-number="1"><span class="co"># In-sample</span></a>
<a class="sourceLine" id="cb374-2" data-line-number="2">inSampleMat =<span class="st"> </span><span class="kw">table</span>(<span class="kw">predict</span>(trainingTree, trainingSet), trainingSet<span class="op">$</span>yesno)</a>
<a class="sourceLine" id="cb374-3" data-line-number="3">inSampleMat</a>
<a class="sourceLine" id="cb374-4" data-line-number="4"><span class="co">##    </span></a>
<a class="sourceLine" id="cb374-5" data-line-number="5"><span class="co">##        n    y</span></a>
<a class="sourceLine" id="cb374-6" data-line-number="6"><span class="co">##   n 2287  440</span></a>
<a class="sourceLine" id="cb374-7" data-line-number="7"><span class="co">##   y   69 1110</span></a></code></pre></div>
<div class="sourceCode" id="cb375"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb375-1" data-line-number="1"><span class="kw">sum</span>(<span class="kw">diag</span>(inSampleMat))<span class="op">/</span><span class="kw">sum</span>(inSampleMat)</a>
<a class="sourceLine" id="cb375-2" data-line-number="2"><span class="co">## [1] 0.8696877</span></a></code></pre></div>
<div class="sourceCode" id="cb376"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb376-1" data-line-number="1"><span class="co"># Out of sample</span></a>
<a class="sourceLine" id="cb376-2" data-line-number="2">outSampleMat =<span class="st"> </span><span class="kw">table</span>(<span class="kw">predict</span>(trainingTree, testingSet), testingSet<span class="op">$</span>yesno)</a>
<a class="sourceLine" id="cb376-3" data-line-number="3">outSampleMat</a>
<a class="sourceLine" id="cb376-4" data-line-number="4"><span class="co">##    </span></a>
<a class="sourceLine" id="cb376-5" data-line-number="5"><span class="co">##       n   y</span></a>
<a class="sourceLine" id="cb376-6" data-line-number="6"><span class="co">##   n 423  86</span></a>
<a class="sourceLine" id="cb376-7" data-line-number="7"><span class="co">##   y   9 177</span></a></code></pre></div>
<div class="sourceCode" id="cb377"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb377-1" data-line-number="1"><span class="kw">sum</span>(<span class="kw">diag</span>(outSampleMat))<span class="op">/</span><span class="kw">sum</span>(outSampleMat)</a>
<a class="sourceLine" id="cb377-2" data-line-number="2"><span class="co">## [1] 0.8633094</span></a></code></pre></div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="random-forests.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="bootstrapping.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="book_assets/gitbook-2.6.7/js/app.min.js"></script>
<script src="book_assets/gitbook-2.6.7/js/lunr.js"></script>
<script src="book_assets/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="book_assets/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="book_assets/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="book_assets/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="book_assets/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/bi-sdal/training/edit/master/330-CART.Rmd",
"text": "Edit"
},
"download": ["sdal-training.pdf", "sdal-training.epub"],
"toc": {
"collapse": "subsection",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
